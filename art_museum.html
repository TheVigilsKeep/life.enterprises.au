<!DOCTYPE html>
<html lang="en">
<head>
    <meta content="text/html; charset=UTF-8" http-equiv="content-type">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <link rel="stylesheet" href="profile.css">
  
    <title>DIRECTORY</title>

    <div class="footer">
        <a href="index.html" class="return-link">
            Return to Main Menu
            <span class="arrow-down">V</span>
        </a>
    </div>

    <script>
        // 1. DATA CONFIGURATION
        // Define your characters here. ID matches the data-id in HTML grid.
        // Use blank strings "" for placeholders if you don't have images yet.
        const characters = [
            { id: 0, name: "PR0+0C0L", model: "", info: "" },
            
            { id: 1, name: "?????????", model: "", info: "" },
            { id: 2, name: "Vigil_Creature", model: "", info: "" },
            { id: 3, name: "???????#05", model: "", info: "" },

            { id: 4, name: "?????", model: "", info: "" },

            // ... fill the rest as needed. Defaults provided below.
        ];

        // 2. DOM ELEMENTS
        const slots = document.querySelectorAll('.char-slot');
        const nameDisplay = document.getElementById('char-name');
        const centerImg = document.getElementById('center-model-img');
        const rightImg = document.getElementById('right-info-img');

        // 3. UPDATE FUNCTION
        function updateDisplay(index) {
            // Find data or use default placeholder
            const charData = characters.find(c => c.id === index) || { 
                name: "?????", 
                model: "", 
                info: "" 
            };

            // Update Name
            nameDisplay.textContent = charData.name;

            // Update Center Model
            if(charData.model) {
                centerImg.src = charData.model;
                centerImg.style.display = 'block';
            } else {
                centerImg.style.display = 'none'; // Show "Coming Soon" text
            }

            // Update Right Info Box
            if(charData.info) {
                rightImg.src = charData.info;
                rightImg.style.display = 'block';
            } else {
                rightImg.style.display = 'none';
            }

            // Highlight Grid Box
            slots.forEach(s => s.classList.remove('active'));
            const activeSlot = document.querySelector(`.char-slot[data-id="${index}"]`);
            if(activeSlot) activeSlot.classList.add('active');
        }

        // 4. MOUSE & TOUCH INTERACTION
        slots.forEach(slot => {
            const id = parseInt(slot.getAttribute('data-id'));
            
            // Mouse Hover
            slot.addEventListener('mouseover', () => {
                updateDisplay(id);
                currentFocusIndex = id; // Sync keyboard state
            });

            // Touch / Click
            slot.addEventListener('click', () => {
                updateDisplay(id);
                currentFocusIndex = id;
            });
        });

        // 5. KEYBOARD ARROW NAVIGATION
        // We map the grid structure manually for perfect navigation
        // Grid Structure: [1 box], [3 boxes], [5 boxes], [5 boxes], [5 boxes]
        // Indices:
        // Row 0: 0
        // Row 1: 1, 2, 3
        // Row 2: 4, 5, 6, 7, 8
        // Row 3: 9, 10, 11, 12, 13
        // Row 4: 14, 15, 16, 17, 18

        let currentFocusIndex = 0;

        document.addEventListener('keydown', (e) => {
            // Prevent default scrolling for arrow keys
            if(["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"].indexOf(e.code) > -1) {
                e.preventDefault();
            }

            let nextIndex = currentFocusIndex;

            // --- NAVIGATION LOGIC ---
            // RIGHT
            if (e.code === 'ArrowRight') {
                nextIndex++;
                if (nextIndex > 18) nextIndex = 0; // Loop to start
            }
            // LEFT
            if (e.code === 'ArrowLeft') {
                nextIndex--;
                if (nextIndex < 0) nextIndex = 18; // Loop to end
            }
            // DOWN (Simple +width logic approximation)
            if (e.code === 'ArrowDown') {
                if (currentFocusIndex === 0) nextIndex = 2; // Top to middle of 2nd row
                else if (currentFocusIndex >= 1 && currentFocusIndex <= 3) nextIndex = currentFocusIndex + 3 + (currentFocusIndex - 1); // 2->6 roughly
                else nextIndex = currentFocusIndex + 5; 
                
                if (nextIndex > 18) nextIndex = 18; // Clamp bottom
            }
            // UP
            if (e.code === 'ArrowUp') {
                if (currentFocusIndex >= 4) nextIndex = currentFocusIndex - 5;
                else if (currentFocusIndex >= 1) nextIndex = 0; // 2nd row to top
                else nextIndex = 0; // Clamp top
            }

            // Apply Change
            if(nextIndex !== currentFocusIndex) {
                currentFocusIndex = nextIndex;
                updateDisplay(currentFocusIndex);
            }
        });

        // Initialize first box
        updateDisplay(0);

    </script>
</body>
</html>
